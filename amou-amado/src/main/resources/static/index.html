<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Amou,Amado? - Plataforma LGBTQIA+</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="logo-search-container">
            <div class="logo-container">
                <a href="index.html">
                    <img src="imagens/logo.png" alt="Logo Amou, Amado?" class="main-logo">
                </a>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Pesquisar eventos, artistas, locais..." aria-label="Campo de pesquisa">
                <i class="fas fa-search search-icon"></i>
            </div>
        </div>
        <div class="header-actions">
            <button class="header-btn btn-create">
                <i class="fas fa-plus-circle"></i> <span class="btn-text">Criar Evento</span>
            </button>
            <button class="header-btn btn-events">
                <i class="fas fa-calendar-check"></i> <span class="btn-text">Meus Eventos</span>
            </button>
            <button class="header-btn btn-profile">
                <i class="fas fa-user-circle"></i> <span class="btn-text">Perfil</span>
            </button>
        </div>
    </header>

    <!-- Carrossel -->
    <section class="carousel-section">
        <div class="carousel-container" id="carousel">
            <div class="carousel-slide" style="background-image: url('https://source.unsplash.com/random/1600x900/?lgbtq,event');">
                <div class="carousel-content">
                    <h2 class="carousel-title">Pride Salvador 2023</h2>
                    <p class="carousel-description">O maior evento LGBTQIA+ da Bahia com shows, palestras e muita diversão</p>
                    <a href="#" class="btn-carousel">Comprar Ingressos</a>
                </div>
            </div>
            <div class="carousel-slide" style="background-image: url('https://source.unsplash.com/random/1600x900/?theater,show');">
                <div class="carousel-content">
                    <h2 class="carousel-title">Festival de Artes LGBTQIA+</h2>
                    <p class="carousel-description">Uma celebração da diversidade através da arte e da cultura</p>
                    <a href="#" class="btn-carousel">Ver Programação</a>
                </div>
            </div>
            <div class="carousel-slide" style="background-image: url('https://source.unsplash.com/random/1600x900/?concert,music');">
                <div class="carousel-content">
                    <h2 class="carousel-title">Show Drag Queen Extravaganza</h2>
                    <p class="carousel-description">As melhores drag queens do Brasil em uma noite inesquecível</p>
                    <a href="#" class="btn-carousel">Reservar Lugares</a>
                </div>
            </div>
        </div>
        <div class="carousel-arrow arrow-left" id="carousel-prev"><i class="fas fa-chevron-left"></i></div>
        <div class="carousel-arrow arrow-right" id="carousel-next"><i class="fas fa-chevron-right"></i></div>
        <div class="carousel-nav" id="carousel-dots">
            <div class="carousel-dot active"></div>
            <div class="carousel-dot"></div>
            <div class="carousel-dot"></div>
        </div>
    </section>

    <!-- Seção Próximos Eventos -->
    <section class="featured-section">
        <div class="section-header">
            <h2 class="section-title">Próximos Eventos</h2>
            <a href="eventos.html" class="btn-ver-tudo">Ver tudo <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="events-horizontal">
            <div class="events-container" id="proximos-container"></div>
            <div class="nav-arrow arrow-left" data-container="proximos-container"><i class="fas fa-chevron-left"></i></div>
            <div class="nav-arrow arrow-right" data-container="proximos-container"><i class="fas fa-chevron-right"></i></div>
        </div>
    </section>

    <!-- Seção Artistas em Destaque (mock por enquanto) -->
    <section class="featured-section">
        <div class="section-header">
            <h2 class="section-title">Artistas em Destaque</h2>
            <a href="artistas.html" class="btn-ver-tudo">Ver tudo <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="events-horizontal">
            <div class="events-container" id="artistas-container"></div>
            <div class="nav-arrow arrow-left" data-container="artistas-container"><i class="fas fa-chevron-left"></i></div>
            <div class="nav-arrow arrow-right" data-container="artistas-container"><i class="fas fa-chevron-right"></i></div>
        </div>
    </section>

    <!-- Rodapé -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>Sobre Nós</h3>
                <p>A Amou,Amado? é uma plataforma que busca dar visibilidade para os eventos culturais e educativos feitos por e para o público LGBTQIA+ de Salvador.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Links Rápidos</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="eventos.html">Eventos</a></li>
                    <li><a href="#">Artistas</a></li>
                    <li><a href="#">Locais</a></li>
                    <li><a href="#">Promoções</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contato</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-envelope"></i> Amouamadocontato@gmail.com</li>
                    <li><i class="fas fa-phone"></i> (71) 99999-9999</li>
                    <li><i class="fas fa-map-marker-alt"></i> Salvador, BA - Brasil</li>
                </ul>
            </div>
        </div>
        <div class="copyright container">
            <p>&copy; 2023 Amou,Amado?. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
    async function buscarProximosEventos() {
        try {
            const resposta = await fetch("http://localhost:8080/eventos/proximos");
            if (!resposta.ok) throw new Error("Erro ao carregar eventos");

            const eventos = await resposta.json();
            renderEvents(eventos, "proximos-container");
        } catch (erro) {
            console.error("Erro ao buscar eventos:", erro);
        }
    }

    function renderEvents(events, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';

        events.forEach(event => {
            const preco = event.preco === 0 ? "Gratuito" : `R$ ${event.preco.toFixed(2).replace('.', ',')}`;

            const eventCard = document.createElement('div');
            eventCard.className = 'event-card';
            eventCard.innerHTML = `
                <div class="event-image">
                    <img src="${event.imagemUrl}" alt="${event.titulo}">
                </div>
                <div class="event-content">
                    <span class="event-category">${event.categoria}</span>
                    <h3 class="event-title">${event.titulo}</h3>
                    <div class="event-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar-alt"></i>
                            <span>${formatarData(event.data)}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.local}</span>
                        </div>
                    </div>
                    <div class="event-price">${preco}</div>
                </div>
            `;
            container.appendChild(eventCard);
        });
    }

    function formatarData(dataString) {
        const data = new Date(dataString);
        const dia = data.getDate().toString().padStart(2, '0');
        const mes = (data.getMonth() + 1).toString().padStart(2, '0');
        const ano = data.getFullYear();
        const horas = data.getHours().toString().padStart(2, '0');
        const minutos = data.getMinutes().toString().padStart(2, '0');
        return `${dia}/${mes}/${ano} às ${horas}:${minutos}`;
    }

    document.addEventListener("DOMContentLoaded", () => {
        buscarProximosEventos();
    });
</script>
</body>
</html>